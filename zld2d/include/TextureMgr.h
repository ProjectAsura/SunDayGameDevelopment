//-----------------------------------------------------------------------------
// File : TextureMgr.h
// Desc : Texture Manager.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include <asdxTexture.h>


///////////////////////////////////////////////////////////////////////////////
// TextureMgr class
///////////////////////////////////////////////////////////////////////////////
class TextureMgr
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      シングルトンインスタンスを取得します.
    //-------------------------------------------------------------------------
    static TextureMgr& Instance();

    //-------------------------------------------------------------------------
    //! @brief      テクスチャをロードします.
    //-------------------------------------------------------------------------
    bool Load(uint32_t count, const char** paths);

    //-------------------------------------------------------------------------
    //! @brief      テクスチャを破棄します.
    //-------------------------------------------------------------------------
    void Term();

    //-------------------------------------------------------------------------
    //! @brief      テクスチャを取得します.
    //-------------------------------------------------------------------------
    ID3D11ShaderResourceView* GetSRV(uint32_t index);

private:
    //=========================================================================
    // private variables.
    //=========================================================================
    static TextureMgr               s_Instance;
    std::vector<asdx::Texture2D>    m_Textures;

    //=========================================================================
    // private methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    TextureMgr();

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    ~TextureMgr();

    TextureMgr              (const TextureMgr&) = delete;   // アクセス禁止.
    TextureMgr& operator =  (const TextureMgr&) = delete;   // アクセス禁止.
};

//-----------------------------------------------------------------------------
//! @brief      テクスチャを取得します.
//-----------------------------------------------------------------------------
inline ID3D11ShaderResourceView* GetTexture(uint32_t index)
{ return TextureMgr::Instance().GetSRV(index); }
